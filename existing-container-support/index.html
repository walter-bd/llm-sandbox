<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A lightweight and portable sandbox environment for running LLM-generated code safely using containers"><meta name=author content="Duy Huynh"><link href=https://vndee.github.io/llm-sandbox/existing-container-support/ rel=canonical><link href=../integrations/ rel=prev><link href=../examples/ rel=next><link rel=icon href=../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.14"><title>Existing Container Support - LLM Sandbox Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.342714a4.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../css/timeago.css><link rel=stylesheet href=../assets/_mkdocstrings.css><link rel=stylesheet href=../stylesheets/extra.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-WV2MGL0XKM"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-WV2MGL0XKM",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-WV2MGL0XKM",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#existing-container-support class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="LLM Sandbox Documentation" class="md-header__button md-logo" aria-label="LLM Sandbox Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> LLM Sandbox Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Existing Container Support </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/vndee/llm-sandbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vndee/llm-sandbox </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../getting-started/ class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../configuration/ class=md-tabs__link> User Guide </a> </li> <li class=md-tabs__item> <a href=../examples/ class=md-tabs__link> Examples </a> </li> <li class=md-tabs__item> <a href=../api-reference/ class=md-tabs__link> API Reference </a> </li> <li class=md-tabs__item> <a href=../contributing/ class=md-tabs__link> Contributing </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="LLM Sandbox Documentation" class="md-nav__button md-logo" aria-label="LLM Sandbox Documentation" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> LLM Sandbox Documentation </label> <div class=md-nav__source> <a href=https://github.com/vndee/llm-sandbox title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> vndee/llm-sandbox </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../getting-started/ class=md-nav__link> <span class=md-ellipsis> Getting Started </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> User Guide </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> User Guide </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../configuration/ class=md-nav__link> <span class=md-ellipsis> Configuration </span> </a> </li> <li class=md-nav__item> <a href=../security/ class=md-nav__link> <span class=md-ellipsis> Security </span> </a> </li> <li class=md-nav__item> <a href=../backends/ class=md-nav__link> <span class=md-ellipsis> Container Backends </span> </a> </li> <li class=md-nav__item> <a href=../languages/ class=md-nav__link> <span class=md-ellipsis> Supported Languages </span> </a> </li> <li class=md-nav__item> <a href=../integrations/ class=md-nav__link> <span class=md-ellipsis> LLM Integrations </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Existing Container Support </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Existing Container Support </span> </a> <nav class="md-nav md-nav--secondary" aria-label="On this page"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> On this page </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#usage class=md-nav__link> <span class=md-ellipsis> Usage </span> </a> <nav class=md-nav aria-label=Usage> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-usage class=md-nav__link> <span class=md-ellipsis> Basic Usage </span> </a> </li> <li class=md-nav__item> <a href=#docker-backend class=md-nav__link> <span class=md-ellipsis> Docker Backend </span> </a> </li> <li class=md-nav__item> <a href=#kubernetes-backend class=md-nav__link> <span class=md-ellipsis> Kubernetes Backend </span> </a> </li> <li class=md-nav__item> <a href=#podman-backend class=md-nav__link> <span class=md-ellipsis> Podman Backend </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#important-notes class=md-nav__link> <span class=md-ellipsis> Important Notes </span> </a> <nav class=md-nav aria-label="Important Notes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#environment-setup-skipped class=md-nav__link> <span class=md-ellipsis> Environment Setup Skipped </span> </a> </li> <li class=md-nav__item> <a href=#container-management class=md-nav__link> <span class=md-ellipsis> Container Management </span> </a> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#configuration-constraints class=md-nav__link> <span class=md-ellipsis> Configuration Constraints </span> </a> </li> <li class=md-nav__item> <a href=#complete-example class=md-nav__link> <span class=md-ellipsis> Complete Example </span> </a> </li> <li class=md-nav__item> <a href=#backend-specific-notes class=md-nav__link> <span class=md-ellipsis> Backend-Specific Notes </span> </a> <nav class=md-nav aria-label="Backend-Specific Notes"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#docker class=md-nav__link> <span class=md-ellipsis> Docker </span> </a> </li> <li class=md-nav__item> <a href=#kubernetes class=md-nav__link> <span class=md-ellipsis> Kubernetes </span> </a> </li> <li class=md-nav__item> <a href=#podman class=md-nav__link> <span class=md-ellipsis> Podman </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../examples/ class=md-nav__link> <span class=md-ellipsis> Examples </span> </a> </li> <li class=md-nav__item> <a href=../api-reference/ class=md-nav__link> <span class=md-ellipsis> API Reference </span> </a> </li> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> <span class=md-ellipsis> Contributing </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/vndee/llm-sandbox/edit/main/docs/existing-container-support.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg> </a> <a href=https://github.com/vndee/llm-sandbox/raw/main/docs/existing-container-support.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg> </a> <h1 id=existing-container-support>Existing Container Support<a class=headerlink href=#existing-container-support title="Permanent link">&para;</a></h1> <p>This document describes the new feature for connecting to existing containers/pods instead of creating new ones.</p> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>LLM Sandbox now supports connecting to existing containers/pods across all backends (Docker, Kubernetes, Podman, Micromamba). This is useful for:</p> <ul> <li><strong>Reusing containers with complex setups</strong>: Connect to containers that already have your specific environment configured</li> <li><strong>Working with long-running services</strong>: Integrate with containers managed by external systems</li> <li><strong>Debugging and troubleshooting</strong>: Connect to running containers to debug issues</li> <li><strong>Performance optimization</strong>: Skip container creation and environment setup time</li> </ul> <h2 id=usage>Usage<a class=headerlink href=#usage title="Permanent link">&para;</a></h2> <h3 id=basic-usage>Basic Usage<a class=headerlink href=#basic-usage title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kn>from</span><span class=w> </span><span class=nn>llm_sandbox</span><span class=w> </span><span class=kn>import</span> <span class=n>SandboxSession</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=c1># Connect to existing Docker container</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span><span class=n>container_id</span><span class=o>=</span><span class=s1>&#39;abc123def456&#39;</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;print(&#39;Hello from existing container!&#39;)&quot;</span><span class=p>)</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>    <span class=nb>print</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span></code></pre></div> <h3 id=docker-backend>Docker Backend<a class=headerlink href=#docker-backend title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kn>from</span><span class=w> </span><span class=nn>llm_sandbox</span><span class=w> </span><span class=kn>import</span> <span class=n>SandboxSession</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=c1># Connect to existing Docker container</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>    <span class=n>container_id</span><span class=o>=</span><span class=s1>&#39;your-container-id&#39;</span><span class=p>,</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>    <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>    <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=p>)</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>    <span class=c1># Run code in existing container</span>
</span><span id=__span-1-10><a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;import sys; print(sys.version)&quot;</span><span class=p>)</span>
</span><span id=__span-1-11><a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>
</span><span id=__span-1-12><a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>    <span class=c1># Install additional libraries</span>
</span><span id=__span-1-13><a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>    <span class=n>session</span><span class=o>.</span><span class=n>install</span><span class=p>([</span><span class=s2>&quot;numpy&quot;</span><span class=p>])</span>
</span><span id=__span-1-14><a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>
</span><span id=__span-1-15><a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>    <span class=c1># Execute commands</span>
</span><span id=__span-1-16><a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>execute_command</span><span class=p>(</span><span class=s2>&quot;ls -la&quot;</span><span class=p>)</span>
</span><span id=__span-1-17><a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>
</span><span id=__span-1-18><a id=__codelineno-1-18 name=__codelineno-1-18 href=#__codelineno-1-18></a>    <span class=c1># Copy files</span>
</span><span id=__span-1-19><a id=__codelineno-1-19 name=__codelineno-1-19 href=#__codelineno-1-19></a>    <span class=n>session</span><span class=o>.</span><span class=n>copy_to_runtime</span><span class=p>(</span><span class=s2>&quot;local_file.py&quot;</span><span class=p>,</span> <span class=s2>&quot;/container/path/file.py&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=kubernetes-backend>Kubernetes Backend<a class=headerlink href=#kubernetes-backend title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kn>from</span><span class=w> </span><span class=nn>llm_sandbox</span><span class=w> </span><span class=kn>import</span> <span class=n>SandboxSession</span><span class=p>,</span> <span class=n>SandboxBackend</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=c1># Connect to existing Kubernetes pod</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>    <span class=n>backend</span><span class=o>=</span><span class=n>SandboxBackend</span><span class=o>.</span><span class=n>KUBERNETES</span><span class=p>,</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a>    <span class=n>container_id</span><span class=o>=</span><span class=s1>&#39;my-pod-name&#39;</span><span class=p>,</span>  <span class=c1># Pod name</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a>    <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a>    <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=p>)</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;print(&#39;Hello from existing pod!&#39;)&quot;</span><span class=p>)</span>
</span></code></pre></div> <h3 id=podman-backend>Podman Backend<a class=headerlink href=#podman-backend title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kn>from</span><span class=w> </span><span class=nn>llm_sandbox</span><span class=w> </span><span class=kn>import</span> <span class=n>SandboxSession</span><span class=p>,</span> <span class=n>SandboxBackend</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=kn>from</span><span class=w> </span><span class=nn>podman</span><span class=w> </span><span class=kn>import</span> <span class=n>PodmanClient</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=n>client</span> <span class=o>=</span> <span class=n>PodmanClient</span><span class=p>()</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a>    <span class=n>backend</span><span class=o>=</span><span class=n>SandboxBackend</span><span class=o>.</span><span class=n>PODMAN</span><span class=p>,</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a>    <span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a>    <span class=n>container_id</span><span class=o>=</span><span class=s1>&#39;podman-container-id&#39;</span><span class=p>,</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a>    <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=p>)</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>session</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;print(&#39;Hello from existing Podman container!&#39;)&quot;</span><span class=p>)</span>
</span></code></pre></div> <h2 id=important-notes>Important Notes<a class=headerlink href=#important-notes title="Permanent link">&para;</a></h2> <h3 id=environment-setup-skipped>Environment Setup Skipped<a class=headerlink href=#environment-setup-skipped title="Permanent link">&para;</a></h3> <p>When using <code>container_id</code>, the sandbox <strong>skips environment setup</strong>. This means:</p> <ul> <li>No virtual environment creation (for Python)</li> <li>No package manager initialization</li> <li>No working directory setup</li> <li><strong>You must ensure the container has the proper environment and tools for your language</strong></li> </ul> <h3 id=container-management>Container Management<a class=headerlink href=#container-management title="Permanent link">&para;</a></h3> <ul> <li><strong>Existing containers are not stopped/removed</strong> when the session ends</li> <li>Only the connection is closed</li> <li>The container continues running after session closure</li> <li>Timeout cleanup will kill the container process but won't remove existing containers</li> </ul> <h3 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">&para;</a></h3> <div class="language-python highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=kn>from</span><span class=w> </span><span class=nn>llm_sandbox</span><span class=w> </span><span class=kn>import</span> <span class=n>SandboxSession</span><span class=p>,</span> <span class=n>ContainerError</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=k>try</span><span class=p>:</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>    <span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span><span class=n>container_id</span><span class=o>=</span><span class=s1>&#39;non-existent&#39;</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>session</span><span class=p>:</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a>        <span class=n>session</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;print(&#39;test&#39;)&quot;</span><span class=p>)</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=k>except</span> <span class=n>ContainerError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Failed to connect: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
</span></code></pre></div> <h2 id=configuration-constraints>Configuration Constraints<a class=headerlink href=#configuration-constraints title="Permanent link">&para;</a></h2> <p>When using <code>container_id</code>:</p> <ul> <li>Cannot use <code>dockerfile</code> parameter (validation error)</li> <li><code>image</code> parameter is ignored</li> <li>Environment setup is skipped</li> <li>Container lifecycle management is limited</li> </ul> <h2 id=complete-example>Complete Example<a class=headerlink href=#complete-example title="Permanent link">&para;</a></h2> <div class="language-python highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=sd>&quot;&quot;&quot;Example demonstrating connecting to existing containers/pods.</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=sd>This example shows how to use LLM Sandbox with existing containers instead of creating new ones.</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=sd>This is useful for:</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=sd>- Reusing containers with complex setups</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=sd>- Working with long-running services</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=sd>- Debugging and troubleshooting</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=sd>- Connecting to containers managed by external systems</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=sd>&quot;&quot;&quot;</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=kn>import</span><span class=w> </span><span class=nn>logging</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=kn>import</span><span class=w> </span><span class=nn>time</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=kn>from</span><span class=w> </span><span class=nn>docker</span><span class=w> </span><span class=kn>import</span> <span class=n>DockerClient</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=kn>from</span><span class=w> </span><span class=nn>llm_sandbox</span><span class=w> </span><span class=kn>import</span> <span class=n>SandboxBackend</span><span class=p>,</span> <span class=n>SandboxSession</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=kn>from</span><span class=w> </span><span class=nn>llm_sandbox.exceptions</span><span class=w> </span><span class=kn>import</span> <span class=n>ContainerError</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=n>logging</span><span class=o>.</span><span class=n>basicConfig</span><span class=p>(</span><span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>INFO</span><span class=p>,</span> <span class=nb>format</span><span class=o>=</span><span class=s2>&quot;</span><span class=si>%(asctime)s</span><span class=s2> - </span><span class=si>%(levelname)s</span><span class=s2> - </span><span class=si>%(message)s</span><span class=s2>&quot;</span><span class=p>)</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=k>def</span><span class=w> </span><span class=nf>create_and_setup_container</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a container with custom setup and return its ID.</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=sd>    This simulates having an existing container with custom environment.</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=sd>    Returns:</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=sd>        str: Container ID</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a>
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=sd>    &quot;&quot;&quot;</span>
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>    <span class=n>client</span> <span class=o>=</span> <span class=n>DockerClient</span><span class=p>(</span><span class=n>base_url</span><span class=o>=</span><span class=s2>&quot;unix:///Users/vndee/.docker/run/docker.sock&quot;</span><span class=p>)</span>
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🚀 Creating a container with custom setup...&quot;</span><span class=p>)</span>
</span><span id=__span-5-34><a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a>
</span><span id=__span-5-35><a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a>    <span class=c1># Create a new container with custom environment</span>
</span><span id=__span-5-36><a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a>    <span class=c1># Use commit_container=True to save the container state</span>
</span><span id=__span-5-37><a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a>    <span class=n>sandbox</span> <span class=o>=</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-5-38><a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a>        <span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span>
</span><span id=__span-5-39><a id=__codelineno-5-39 name=__codelineno-5-39 href=#__codelineno-5-39></a>        <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span>
</span><span id=__span-5-40><a id=__codelineno-5-40 name=__codelineno-5-40 href=#__codelineno-5-40></a>        <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-5-41><a id=__codelineno-5-41 name=__codelineno-5-41 href=#__codelineno-5-41></a>        <span class=n>image</span><span class=o>=</span><span class=s2>&quot;ghcr.io/vndee/sandbox-python-311-bullseye&quot;</span><span class=p>,</span>
</span><span id=__span-5-42><a id=__codelineno-5-42 name=__codelineno-5-42 href=#__codelineno-5-42></a>    <span class=p>)</span>
</span><span id=__span-5-43><a id=__codelineno-5-43 name=__codelineno-5-43 href=#__codelineno-5-43></a>
</span><span id=__span-5-44><a id=__codelineno-5-44 name=__codelineno-5-44 href=#__codelineno-5-44></a>    <span class=n>sandbox</span><span class=o>.</span><span class=n>open</span><span class=p>()</span>
</span><span id=__span-5-45><a id=__codelineno-5-45 name=__codelineno-5-45 href=#__codelineno-5-45></a>
</span><span id=__span-5-46><a id=__codelineno-5-46 name=__codelineno-5-46 href=#__codelineno-5-46></a>    <span class=c1># Install some packages and setup environment</span>
</span><span id=__span-5-47><a id=__codelineno-5-47 name=__codelineno-5-47 href=#__codelineno-5-47></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📦 Installing packages...&quot;</span><span class=p>)</span>
</span><span id=__span-5-48><a id=__codelineno-5-48 name=__codelineno-5-48 href=#__codelineno-5-48></a>    <span class=n>sandbox</span><span class=o>.</span><span class=n>install</span><span class=p>([</span><span class=s2>&quot;numpy&quot;</span><span class=p>,</span> <span class=s2>&quot;pandas&quot;</span><span class=p>,</span> <span class=s2>&quot;matplotlib&quot;</span><span class=p>])</span>
</span><span id=__span-5-49><a id=__codelineno-5-49 name=__codelineno-5-49 href=#__codelineno-5-49></a>
</span><span id=__span-5-50><a id=__codelineno-5-50 name=__codelineno-5-50 href=#__codelineno-5-50></a>    <span class=c1># Create some files</span>
</span><span id=__span-5-51><a id=__codelineno-5-51 name=__codelineno-5-51 href=#__codelineno-5-51></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📁 Setting up files...&quot;</span><span class=p>)</span>
</span><span id=__span-5-52><a id=__codelineno-5-52 name=__codelineno-5-52 href=#__codelineno-5-52></a>    <span class=c1># Use Python code to create files instead of shell commands</span>
</span><span id=__span-5-53><a id=__codelineno-5-53 name=__codelineno-5-53 href=#__codelineno-5-53></a>    <span class=n>sandbox</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-5-54><a id=__codelineno-5-54 name=__codelineno-5-54 href=#__codelineno-5-54></a><span class=s2># Create hello.py file</span>
</span><span id=__span-5-55><a id=__codelineno-5-55 name=__codelineno-5-55 href=#__codelineno-5-55></a><span class=s2>with open(&#39;/sandbox/hello.py&#39;, &#39;w&#39;) as f:</span>
</span><span id=__span-5-56><a id=__codelineno-5-56 name=__codelineno-5-56 href=#__codelineno-5-56></a><span class=s2>    f.write(&#39;print(&quot;Hello from existing container!&quot;)&#39;)</span>
</span><span id=__span-5-57><a id=__codelineno-5-57 name=__codelineno-5-57 href=#__codelineno-5-57></a>
</span><span id=__span-5-58><a id=__codelineno-5-58 name=__codelineno-5-58 href=#__codelineno-5-58></a><span class=s2># Create data.txt file</span>
</span><span id=__span-5-59><a id=__codelineno-5-59 name=__codelineno-5-59 href=#__codelineno-5-59></a><span class=s2>with open(&#39;/sandbox/data.txt&#39;, &#39;w&#39;) as f:</span>
</span><span id=__span-5-60><a id=__codelineno-5-60 name=__codelineno-5-60 href=#__codelineno-5-60></a><span class=s2>    f.write(&#39;Custom environment data&#39;)</span>
</span><span id=__span-5-61><a id=__codelineno-5-61 name=__codelineno-5-61 href=#__codelineno-5-61></a>
</span><span id=__span-5-62><a id=__codelineno-5-62 name=__codelineno-5-62 href=#__codelineno-5-62></a><span class=s2>print(&quot;Files created successfully!&quot;)</span>
</span><span id=__span-5-63><a id=__codelineno-5-63 name=__codelineno-5-63 href=#__codelineno-5-63></a><span class=s2>&quot;&quot;&quot;</span><span class=p>)</span>
</span><span id=__span-5-64><a id=__codelineno-5-64 name=__codelineno-5-64 href=#__codelineno-5-64></a>
</span><span id=__span-5-65><a id=__codelineno-5-65 name=__codelineno-5-65 href=#__codelineno-5-65></a>    <span class=c1># Verify files were created</span>
</span><span id=__span-5-66><a id=__codelineno-5-66 name=__codelineno-5-66 href=#__codelineno-5-66></a>    <span class=n>result</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>execute_command</span><span class=p>(</span><span class=s2>&quot;ls -la /sandbox/&quot;</span><span class=p>)</span>
</span><span id=__span-5-67><a id=__codelineno-5-67 name=__codelineno-5-67 href=#__codelineno-5-67></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📋 Created files:&quot;</span><span class=p>)</span>
</span><span id=__span-5-68><a id=__codelineno-5-68 name=__codelineno-5-68 href=#__codelineno-5-68></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span><span id=__span-5-69><a id=__codelineno-5-69 name=__codelineno-5-69 href=#__codelineno-5-69></a>
</span><span id=__span-5-70><a id=__codelineno-5-70 name=__codelineno-5-70 href=#__codelineno-5-70></a>    <span class=c1># Get container ID before closing</span>
</span><span id=__span-5-71><a id=__codelineno-5-71 name=__codelineno-5-71 href=#__codelineno-5-71></a>    <span class=n>container_id</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>container</span><span class=o>.</span><span class=n>id</span>
</span><span id=__span-5-72><a id=__codelineno-5-72 name=__codelineno-5-72 href=#__codelineno-5-72></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Container created with ID: </span><span class=si>%s</span><span class=s2>...&quot;</span><span class=p>,</span> <span class=n>container_id</span><span class=p>[:</span><span class=mi>12</span><span class=p>])</span>
</span><span id=__span-5-73><a id=__codelineno-5-73 name=__codelineno-5-73 href=#__codelineno-5-73></a>    <span class=k>return</span> <span class=nb>str</span><span class=p>(</span><span class=n>container_id</span><span class=p>)</span>
</span><span id=__span-5-74><a id=__codelineno-5-74 name=__codelineno-5-74 href=#__codelineno-5-74></a>
</span><span id=__span-5-75><a id=__codelineno-5-75 name=__codelineno-5-75 href=#__codelineno-5-75></a>
</span><span id=__span-5-76><a id=__codelineno-5-76 name=__codelineno-5-76 href=#__codelineno-5-76></a><span class=k>def</span><span class=w> </span><span class=nf>demo_connect_to_existing_docker_container</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-5-77><a id=__codelineno-5-77 name=__codelineno-5-77 href=#__codelineno-5-77></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Demo connecting to an existing Docker container.&quot;&quot;&quot;</span>
</span><span id=__span-5-78><a id=__codelineno-5-78 name=__codelineno-5-78 href=#__codelineno-5-78></a>    <span class=c1># Demo 1: Create a container for demonstration</span>
</span><span id=__span-5-79><a id=__codelineno-5-79 name=__codelineno-5-79 href=#__codelineno-5-79></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-80><a id=__codelineno-5-80 name=__codelineno-5-80 href=#__codelineno-5-80></a>        <span class=n>container_id</span> <span class=o>=</span> <span class=n>create_and_setup_container</span><span class=p>()</span>
</span><span id=__span-5-81><a id=__codelineno-5-81 name=__codelineno-5-81 href=#__codelineno-5-81></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-5-82><a id=__codelineno-5-82 name=__codelineno-5-82 href=#__codelineno-5-82></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Failed to create demo container&quot;</span><span class=p>)</span>
</span><span id=__span-5-83><a id=__codelineno-5-83 name=__codelineno-5-83 href=#__codelineno-5-83></a>        <span class=k>return</span>
</span><span id=__span-5-84><a id=__codelineno-5-84 name=__codelineno-5-84 href=#__codelineno-5-84></a>
</span><span id=__span-5-85><a id=__codelineno-5-85 name=__codelineno-5-85 href=#__codelineno-5-85></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-86><a id=__codelineno-5-86 name=__codelineno-5-86 href=#__codelineno-5-86></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🐳 Demo: Connecting to Existing Docker Container&quot;</span><span class=p>)</span>
</span><span id=__span-5-87><a id=__codelineno-5-87 name=__codelineno-5-87 href=#__codelineno-5-87></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-88><a id=__codelineno-5-88 name=__codelineno-5-88 href=#__codelineno-5-88></a>
</span><span id=__span-5-89><a id=__codelineno-5-89 name=__codelineno-5-89 href=#__codelineno-5-89></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-90><a id=__codelineno-5-90 name=__codelineno-5-90 href=#__codelineno-5-90></a>        <span class=n>client</span> <span class=o>=</span> <span class=n>DockerClient</span><span class=p>(</span><span class=n>base_url</span><span class=o>=</span><span class=s2>&quot;unix:///Users/vndee/.docker/run/docker.sock&quot;</span><span class=p>)</span>
</span><span id=__span-5-91><a id=__codelineno-5-91 name=__codelineno-5-91 href=#__codelineno-5-91></a>        <span class=c1># Connect to existing container - no environment setup needed</span>
</span><span id=__span-5-92><a id=__codelineno-5-92 name=__codelineno-5-92 href=#__codelineno-5-92></a>        <span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span><span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span> <span class=n>container_id</span><span class=o>=</span><span class=n>container_id</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>as</span> <span class=n>sandbox</span><span class=p>:</span>
</span><span id=__span-5-93><a id=__codelineno-5-93 name=__codelineno-5-93 href=#__codelineno-5-93></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Connected to existing container successfully!&quot;</span><span class=p>)</span>
</span><span id=__span-5-94><a id=__codelineno-5-94 name=__codelineno-5-94 href=#__codelineno-5-94></a>
</span><span id=__span-5-95><a id=__codelineno-5-95 name=__codelineno-5-95 href=#__codelineno-5-95></a>            <span class=c1># Run code that uses pre-installed packages</span>
</span><span id=__span-5-96><a id=__codelineno-5-96 name=__codelineno-5-96 href=#__codelineno-5-96></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-5-97><a id=__codelineno-5-97 name=__codelineno-5-97 href=#__codelineno-5-97></a><span class=s2>import numpy as np</span>
</span><span id=__span-5-98><a id=__codelineno-5-98 name=__codelineno-5-98 href=#__codelineno-5-98></a><span class=s2>import pandas as pd</span>
</span><span id=__span-5-99><a id=__codelineno-5-99 name=__codelineno-5-99 href=#__codelineno-5-99></a><span class=s2>import matplotlib.pyplot as plt</span>
</span><span id=__span-5-100><a id=__codelineno-5-100 name=__codelineno-5-100 href=#__codelineno-5-100></a>
</span><span id=__span-5-101><a id=__codelineno-5-101 name=__codelineno-5-101 href=#__codelineno-5-101></a><span class=s2>print(&quot;Running in existing container!&quot;)</span>
</span><span id=__span-5-102><a id=__codelineno-5-102 name=__codelineno-5-102 href=#__codelineno-5-102></a><span class=s2>print(f&quot;NumPy version: </span><span class=si>{np.__version__}</span><span class=s2>&quot;)</span>
</span><span id=__span-5-103><a id=__codelineno-5-103 name=__codelineno-5-103 href=#__codelineno-5-103></a><span class=s2>print(f&quot;Pandas version: </span><span class=si>{pd.__version__}</span><span class=s2>&quot;)</span>
</span><span id=__span-5-104><a id=__codelineno-5-104 name=__codelineno-5-104 href=#__codelineno-5-104></a>
</span><span id=__span-5-105><a id=__codelineno-5-105 name=__codelineno-5-105 href=#__codelineno-5-105></a><span class=s2># Use the pre-existing data</span>
</span><span id=__span-5-106><a id=__codelineno-5-106 name=__codelineno-5-106 href=#__codelineno-5-106></a><span class=s2>with open(&#39;/sandbox/data.txt&#39;, &#39;r&#39;) as f:</span>
</span><span id=__span-5-107><a id=__codelineno-5-107 name=__codelineno-5-107 href=#__codelineno-5-107></a><span class=s2>    data = f.read().strip()</span>
</span><span id=__span-5-108><a id=__codelineno-5-108 name=__codelineno-5-108 href=#__codelineno-5-108></a><span class=s2>    print(f&quot;Found existing data: </span><span class=si>{data}</span><span class=s2>&quot;)</span>
</span><span id=__span-5-109><a id=__codelineno-5-109 name=__codelineno-5-109 href=#__codelineno-5-109></a>
</span><span id=__span-5-110><a id=__codelineno-5-110 name=__codelineno-5-110 href=#__codelineno-5-110></a><span class=s2># Generate some data and create a simple plot</span>
</span><span id=__span-5-111><a id=__codelineno-5-111 name=__codelineno-5-111 href=#__codelineno-5-111></a><span class=s2>x = np.linspace(0, 10, 100)</span>
</span><span id=__span-5-112><a id=__codelineno-5-112 name=__codelineno-5-112 href=#__codelineno-5-112></a><span class=s2>y = np.sin(x)</span>
</span><span id=__span-5-113><a id=__codelineno-5-113 name=__codelineno-5-113 href=#__codelineno-5-113></a>
</span><span id=__span-5-114><a id=__codelineno-5-114 name=__codelineno-5-114 href=#__codelineno-5-114></a><span class=s2>plt.figure(figsize=(8, 6))</span>
</span><span id=__span-5-115><a id=__codelineno-5-115 name=__codelineno-5-115 href=#__codelineno-5-115></a><span class=s2>plt.plot(x, y)</span>
</span><span id=__span-5-116><a id=__codelineno-5-116 name=__codelineno-5-116 href=#__codelineno-5-116></a><span class=s2>plt.title(&#39;Plot from Existing Container&#39;)</span>
</span><span id=__span-5-117><a id=__codelineno-5-117 name=__codelineno-5-117 href=#__codelineno-5-117></a><span class=s2>plt.xlabel(&#39;X&#39;)</span>
</span><span id=__span-5-118><a id=__codelineno-5-118 name=__codelineno-5-118 href=#__codelineno-5-118></a><span class=s2>plt.ylabel(&#39;sin(X)&#39;)</span>
</span><span id=__span-5-119><a id=__codelineno-5-119 name=__codelineno-5-119 href=#__codelineno-5-119></a><span class=s2>plt.grid(True)</span>
</span><span id=__span-5-120><a id=__codelineno-5-120 name=__codelineno-5-120 href=#__codelineno-5-120></a><span class=s2>plt.savefig(&#39;/sandbox/plot.png&#39;)</span>
</span><span id=__span-5-121><a id=__codelineno-5-121 name=__codelineno-5-121 href=#__codelineno-5-121></a><span class=s2>print(&quot;Plot saved as /sandbox/plot.png&quot;)</span>
</span><span id=__span-5-122><a id=__codelineno-5-122 name=__codelineno-5-122 href=#__codelineno-5-122></a><span class=s2>&quot;&quot;&quot;</span><span class=p>)</span>
</span><span id=__span-5-123><a id=__codelineno-5-123 name=__codelineno-5-123 href=#__codelineno-5-123></a>
</span><span id=__span-5-124><a id=__codelineno-5-124 name=__codelineno-5-124 href=#__codelineno-5-124></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📊 Code execution output:&quot;</span><span class=p>)</span>
</span><span id=__span-5-125><a id=__codelineno-5-125 name=__codelineno-5-125 href=#__codelineno-5-125></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span><span id=__span-5-126><a id=__codelineno-5-126 name=__codelineno-5-126 href=#__codelineno-5-126></a>
</span><span id=__span-5-127><a id=__codelineno-5-127 name=__codelineno-5-127 href=#__codelineno-5-127></a>            <span class=c1># Execute the pre-existing script</span>
</span><span id=__span-5-128><a id=__codelineno-5-128 name=__codelineno-5-128 href=#__codelineno-5-128></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>execute_command</span><span class=p>(</span><span class=s2>&quot;python /sandbox/hello.py&quot;</span><span class=p>)</span>
</span><span id=__span-5-129><a id=__codelineno-5-129 name=__codelineno-5-129 href=#__codelineno-5-129></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📝 Pre-existing script output:&quot;</span><span class=p>)</span>
</span><span id=__span-5-130><a id=__codelineno-5-130 name=__codelineno-5-130 href=#__codelineno-5-130></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span><span id=__span-5-131><a id=__codelineno-5-131 name=__codelineno-5-131 href=#__codelineno-5-131></a>
</span><span id=__span-5-132><a id=__codelineno-5-132 name=__codelineno-5-132 href=#__codelineno-5-132></a>            <span class=c1># List files to show existing content</span>
</span><span id=__span-5-133><a id=__codelineno-5-133 name=__codelineno-5-133 href=#__codelineno-5-133></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>execute_command</span><span class=p>(</span><span class=s2>&quot;ls -la /sandbox/&quot;</span><span class=p>)</span>
</span><span id=__span-5-134><a id=__codelineno-5-134 name=__codelineno-5-134 href=#__codelineno-5-134></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📁 Container contents:&quot;</span><span class=p>)</span>
</span><span id=__span-5-135><a id=__codelineno-5-135 name=__codelineno-5-135 href=#__codelineno-5-135></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span><span id=__span-5-136><a id=__codelineno-5-136 name=__codelineno-5-136 href=#__codelineno-5-136></a>
</span><span id=__span-5-137><a id=__codelineno-5-137 name=__codelineno-5-137 href=#__codelineno-5-137></a>    <span class=k>except</span> <span class=n>ContainerError</span><span class=p>:</span>
</span><span id=__span-5-138><a id=__codelineno-5-138 name=__codelineno-5-138 href=#__codelineno-5-138></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Failed to connect to container&quot;</span><span class=p>)</span>
</span><span id=__span-5-139><a id=__codelineno-5-139 name=__codelineno-5-139 href=#__codelineno-5-139></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-5-140><a id=__codelineno-5-140 name=__codelineno-5-140 href=#__codelineno-5-140></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Unexpected error&quot;</span><span class=p>)</span>
</span><span id=__span-5-141><a id=__codelineno-5-141 name=__codelineno-5-141 href=#__codelineno-5-141></a>
</span><span id=__span-5-142><a id=__codelineno-5-142 name=__codelineno-5-142 href=#__codelineno-5-142></a>
</span><span id=__span-5-143><a id=__codelineno-5-143 name=__codelineno-5-143 href=#__codelineno-5-143></a><span class=k>def</span><span class=w> </span><span class=nf>demo_connect_to_existing_kubernetes_pod</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-5-144><a id=__codelineno-5-144 name=__codelineno-5-144 href=#__codelineno-5-144></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Demo connecting to an existing Kubernetes pod.&quot;&quot;&quot;</span>
</span><span id=__span-5-145><a id=__codelineno-5-145 name=__codelineno-5-145 href=#__codelineno-5-145></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-146><a id=__codelineno-5-146 name=__codelineno-5-146 href=#__codelineno-5-146></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;☸️  Demo: Connecting to Existing Kubernetes Pod&quot;</span><span class=p>)</span>
</span><span id=__span-5-147><a id=__codelineno-5-147 name=__codelineno-5-147 href=#__codelineno-5-147></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-148><a id=__codelineno-5-148 name=__codelineno-5-148 href=#__codelineno-5-148></a>
</span><span id=__span-5-149><a id=__codelineno-5-149 name=__codelineno-5-149 href=#__codelineno-5-149></a>    <span class=c1># For demo purposes, we&#39;ll create a pod first</span>
</span><span id=__span-5-150><a id=__codelineno-5-150 name=__codelineno-5-150 href=#__codelineno-5-150></a>    <span class=c1># In practice, you would have a pod already running</span>
</span><span id=__span-5-151><a id=__codelineno-5-151 name=__codelineno-5-151 href=#__codelineno-5-151></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-152><a id=__codelineno-5-152 name=__codelineno-5-152 href=#__codelineno-5-152></a>        <span class=c1># First create a pod (simulating existing pod)</span>
</span><span id=__span-5-153><a id=__codelineno-5-153 name=__codelineno-5-153 href=#__codelineno-5-153></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📦 Creating a demo pod (simulating existing pod)...&quot;</span><span class=p>)</span>
</span><span id=__span-5-154><a id=__codelineno-5-154 name=__codelineno-5-154 href=#__codelineno-5-154></a>        <span class=n>sandbox</span> <span class=o>=</span> <span class=n>SandboxSession</span><span class=p>(</span><span class=n>backend</span><span class=o>=</span><span class=n>SandboxBackend</span><span class=o>.</span><span class=n>KUBERNETES</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-5-155><a id=__codelineno-5-155 name=__codelineno-5-155 href=#__codelineno-5-155></a>        <span class=n>sandbox</span><span class=o>.</span><span class=n>open</span><span class=p>()</span>
</span><span id=__span-5-156><a id=__codelineno-5-156 name=__codelineno-5-156 href=#__codelineno-5-156></a>        <span class=n>pod_id</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>container</span>  <span class=c1># Get pod name</span>
</span><span id=__span-5-157><a id=__codelineno-5-157 name=__codelineno-5-157 href=#__codelineno-5-157></a>
</span><span id=__span-5-158><a id=__codelineno-5-158 name=__codelineno-5-158 href=#__codelineno-5-158></a>        <span class=c1># Setup some environment</span>
</span><span id=__span-5-159><a id=__codelineno-5-159 name=__codelineno-5-159 href=#__codelineno-5-159></a>        <span class=n>sandbox</span><span class=o>.</span><span class=n>execute_command</span><span class=p>(</span><span class=s2>&quot;echo &#39;Pod environment ready&#39; &gt; /sandbox/pod_info.txt&quot;</span><span class=p>)</span>
</span><span id=__span-5-160><a id=__codelineno-5-160 name=__codelineno-5-160 href=#__codelineno-5-160></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Demo pod created: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>pod_id</span><span class=p>)</span>
</span><span id=__span-5-161><a id=__codelineno-5-161 name=__codelineno-5-161 href=#__codelineno-5-161></a>
</span><span id=__span-5-162><a id=__codelineno-5-162 name=__codelineno-5-162 href=#__codelineno-5-162></a>        <span class=c1># Now connect to the &quot;existing&quot; pod</span>
</span><span id=__span-5-163><a id=__codelineno-5-163 name=__codelineno-5-163 href=#__codelineno-5-163></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🔗 Connecting to existing pod: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>pod_id</span><span class=p>)</span>
</span><span id=__span-5-164><a id=__codelineno-5-164 name=__codelineno-5-164 href=#__codelineno-5-164></a>
</span><span id=__span-5-165><a id=__codelineno-5-165 name=__codelineno-5-165 href=#__codelineno-5-165></a>        <span class=c1># Connect to the existing pod</span>
</span><span id=__span-5-166><a id=__codelineno-5-166 name=__codelineno-5-166 href=#__codelineno-5-166></a>        <span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-5-167><a id=__codelineno-5-167 name=__codelineno-5-167 href=#__codelineno-5-167></a>            <span class=n>backend</span><span class=o>=</span><span class=n>SandboxBackend</span><span class=o>.</span><span class=n>KUBERNETES</span><span class=p>,</span>
</span><span id=__span-5-168><a id=__codelineno-5-168 name=__codelineno-5-168 href=#__codelineno-5-168></a>            <span class=n>container_id</span><span class=o>=</span><span class=n>pod_id</span><span class=p>,</span>  <span class=c1># Connect to existing pod</span>
</span><span id=__span-5-169><a id=__codelineno-5-169 name=__codelineno-5-169 href=#__codelineno-5-169></a>            <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span>
</span><span id=__span-5-170><a id=__codelineno-5-170 name=__codelineno-5-170 href=#__codelineno-5-170></a>            <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
</span><span id=__span-5-171><a id=__codelineno-5-171 name=__codelineno-5-171 href=#__codelineno-5-171></a>        <span class=p>)</span> <span class=k>as</span> <span class=n>sandbox</span><span class=p>:</span>
</span><span id=__span-5-172><a id=__codelineno-5-172 name=__codelineno-5-172 href=#__codelineno-5-172></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Connected to existing pod successfully!&quot;</span><span class=p>)</span>
</span><span id=__span-5-173><a id=__codelineno-5-173 name=__codelineno-5-173 href=#__codelineno-5-173></a>
</span><span id=__span-5-174><a id=__codelineno-5-174 name=__codelineno-5-174 href=#__codelineno-5-174></a>            <span class=c1># Run code in the existing pod</span>
</span><span id=__span-5-175><a id=__codelineno-5-175 name=__codelineno-5-175 href=#__codelineno-5-175></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-5-176><a id=__codelineno-5-176 name=__codelineno-5-176 href=#__codelineno-5-176></a><span class=s2>import sys</span>
</span><span id=__span-5-177><a id=__codelineno-5-177 name=__codelineno-5-177 href=#__codelineno-5-177></a><span class=s2>print(f&quot;Python version: </span><span class=si>{sys.version}</span><span class=s2>&quot;)</span>
</span><span id=__span-5-178><a id=__codelineno-5-178 name=__codelineno-5-178 href=#__codelineno-5-178></a><span class=s2>print(&quot;Running in existing Kubernetes pod!&quot;)</span>
</span><span id=__span-5-179><a id=__codelineno-5-179 name=__codelineno-5-179 href=#__codelineno-5-179></a>
</span><span id=__span-5-180><a id=__codelineno-5-180 name=__codelineno-5-180 href=#__codelineno-5-180></a><span class=s2># Read the existing file</span>
</span><span id=__span-5-181><a id=__codelineno-5-181 name=__codelineno-5-181 href=#__codelineno-5-181></a><span class=s2>try:</span>
</span><span id=__span-5-182><a id=__codelineno-5-182 name=__codelineno-5-182 href=#__codelineno-5-182></a><span class=s2>    with open(&#39;/sandbox/pod_info.txt&#39;, &#39;r&#39;) as f:</span>
</span><span id=__span-5-183><a id=__codelineno-5-183 name=__codelineno-5-183 href=#__codelineno-5-183></a><span class=s2>        info = f.read().strip()</span>
</span><span id=__span-5-184><a id=__codelineno-5-184 name=__codelineno-5-184 href=#__codelineno-5-184></a><span class=s2>        print(f&quot;Pod info: </span><span class=si>{info}</span><span class=s2>&quot;)</span>
</span><span id=__span-5-185><a id=__codelineno-5-185 name=__codelineno-5-185 href=#__codelineno-5-185></a><span class=s2>except FileNotFoundError:</span>
</span><span id=__span-5-186><a id=__codelineno-5-186 name=__codelineno-5-186 href=#__codelineno-5-186></a><span class=s2>    print(&quot;Pod info file not found&quot;)</span>
</span><span id=__span-5-187><a id=__codelineno-5-187 name=__codelineno-5-187 href=#__codelineno-5-187></a>
</span><span id=__span-5-188><a id=__codelineno-5-188 name=__codelineno-5-188 href=#__codelineno-5-188></a><span class=s2># Show current working directory</span>
</span><span id=__span-5-189><a id=__codelineno-5-189 name=__codelineno-5-189 href=#__codelineno-5-189></a><span class=s2>import os</span>
</span><span id=__span-5-190><a id=__codelineno-5-190 name=__codelineno-5-190 href=#__codelineno-5-190></a><span class=s2>print(f&quot;Current directory: {os.getcwd()}&quot;)</span>
</span><span id=__span-5-191><a id=__codelineno-5-191 name=__codelineno-5-191 href=#__codelineno-5-191></a><span class=s2>print(f&quot;Directory contents: {os.listdir(&#39;/sandbox&#39;)}&quot;)</span>
</span><span id=__span-5-192><a id=__codelineno-5-192 name=__codelineno-5-192 href=#__codelineno-5-192></a><span class=s2>&quot;&quot;&quot;</span><span class=p>)</span>
</span><span id=__span-5-193><a id=__codelineno-5-193 name=__codelineno-5-193 href=#__codelineno-5-193></a>
</span><span id=__span-5-194><a id=__codelineno-5-194 name=__codelineno-5-194 href=#__codelineno-5-194></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📊 Pod execution output:&quot;</span><span class=p>)</span>
</span><span id=__span-5-195><a id=__codelineno-5-195 name=__codelineno-5-195 href=#__codelineno-5-195></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span><span id=__span-5-196><a id=__codelineno-5-196 name=__codelineno-5-196 href=#__codelineno-5-196></a>
</span><span id=__span-5-197><a id=__codelineno-5-197 name=__codelineno-5-197 href=#__codelineno-5-197></a>    <span class=k>except</span> <span class=n>ContainerError</span><span class=p>:</span>
</span><span id=__span-5-198><a id=__codelineno-5-198 name=__codelineno-5-198 href=#__codelineno-5-198></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Failed to connect to pod&quot;</span><span class=p>)</span>
</span><span id=__span-5-199><a id=__codelineno-5-199 name=__codelineno-5-199 href=#__codelineno-5-199></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-5-200><a id=__codelineno-5-200 name=__codelineno-5-200 href=#__codelineno-5-200></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Error in Kubernetes demo (cluster may not be available)&quot;</span><span class=p>)</span>
</span><span id=__span-5-201><a id=__codelineno-5-201 name=__codelineno-5-201 href=#__codelineno-5-201></a>
</span><span id=__span-5-202><a id=__codelineno-5-202 name=__codelineno-5-202 href=#__codelineno-5-202></a>
</span><span id=__span-5-203><a id=__codelineno-5-203 name=__codelineno-5-203 href=#__codelineno-5-203></a><span class=k>def</span><span class=w> </span><span class=nf>demo_connect_to_existing_podman_container</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-5-204><a id=__codelineno-5-204 name=__codelineno-5-204 href=#__codelineno-5-204></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Demo connecting to an existing Podman container.&quot;&quot;&quot;</span>
</span><span id=__span-5-205><a id=__codelineno-5-205 name=__codelineno-5-205 href=#__codelineno-5-205></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-206><a id=__codelineno-5-206 name=__codelineno-5-206 href=#__codelineno-5-206></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🦭 Demo: Connecting to Existing Podman Container&quot;</span><span class=p>)</span>
</span><span id=__span-5-207><a id=__codelineno-5-207 name=__codelineno-5-207 href=#__codelineno-5-207></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-208><a id=__codelineno-5-208 name=__codelineno-5-208 href=#__codelineno-5-208></a>
</span><span id=__span-5-209><a id=__codelineno-5-209 name=__codelineno-5-209 href=#__codelineno-5-209></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-210><a id=__codelineno-5-210 name=__codelineno-5-210 href=#__codelineno-5-210></a>        <span class=kn>from</span><span class=w> </span><span class=nn>podman</span><span class=w> </span><span class=kn>import</span> <span class=n>PodmanClient</span>
</span><span id=__span-5-211><a id=__codelineno-5-211 name=__codelineno-5-211 href=#__codelineno-5-211></a>
</span><span id=__span-5-212><a id=__codelineno-5-212 name=__codelineno-5-212 href=#__codelineno-5-212></a>        <span class=n>client</span> <span class=o>=</span> <span class=n>PodmanClient</span><span class=p>(</span>
</span><span id=__span-5-213><a id=__codelineno-5-213 name=__codelineno-5-213 href=#__codelineno-5-213></a>            <span class=n>base_url</span><span class=o>=</span><span class=s2>&quot;unix:///var/folders/lh/rjbzw60n1fv7xr9kffn7gr840000gn/T/podman/podman-machine-default-api.sock&quot;</span>
</span><span id=__span-5-214><a id=__codelineno-5-214 name=__codelineno-5-214 href=#__codelineno-5-214></a>        <span class=p>)</span>
</span><span id=__span-5-215><a id=__codelineno-5-215 name=__codelineno-5-215 href=#__codelineno-5-215></a>
</span><span id=__span-5-216><a id=__codelineno-5-216 name=__codelineno-5-216 href=#__codelineno-5-216></a>        <span class=c1># First create a container (simulating existing container)</span>
</span><span id=__span-5-217><a id=__codelineno-5-217 name=__codelineno-5-217 href=#__codelineno-5-217></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📦 Creating a demo Podman container...&quot;</span><span class=p>)</span>
</span><span id=__span-5-218><a id=__codelineno-5-218 name=__codelineno-5-218 href=#__codelineno-5-218></a>        <span class=n>sandbox</span> <span class=o>=</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-5-219><a id=__codelineno-5-219 name=__codelineno-5-219 href=#__codelineno-5-219></a>            <span class=n>backend</span><span class=o>=</span><span class=n>SandboxBackend</span><span class=o>.</span><span class=n>PODMAN</span><span class=p>,</span> <span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>keep_template</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-5-220><a id=__codelineno-5-220 name=__codelineno-5-220 href=#__codelineno-5-220></a>        <span class=p>)</span>
</span><span id=__span-5-221><a id=__codelineno-5-221 name=__codelineno-5-221 href=#__codelineno-5-221></a>        <span class=n>sandbox</span><span class=o>.</span><span class=n>open</span><span class=p>()</span>
</span><span id=__span-5-222><a id=__codelineno-5-222 name=__codelineno-5-222 href=#__codelineno-5-222></a>        <span class=n>container_id</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>container</span><span class=o>.</span><span class=n>id</span>
</span><span id=__span-5-223><a id=__codelineno-5-223 name=__codelineno-5-223 href=#__codelineno-5-223></a>
</span><span id=__span-5-224><a id=__codelineno-5-224 name=__codelineno-5-224 href=#__codelineno-5-224></a>        <span class=c1># Setup some environment</span>
</span><span id=__span-5-225><a id=__codelineno-5-225 name=__codelineno-5-225 href=#__codelineno-5-225></a>        <span class=n>sandbox</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-5-226><a id=__codelineno-5-226 name=__codelineno-5-226 href=#__codelineno-5-226></a><span class=s2>with open(&#39;/sandbox/podman_info.txt&#39;, &#39;w&#39;) as f:</span>
</span><span id=__span-5-227><a id=__codelineno-5-227 name=__codelineno-5-227 href=#__codelineno-5-227></a><span class=s2>    f.write(&#39;Podman environment ready&#39;)</span>
</span><span id=__span-5-228><a id=__codelineno-5-228 name=__codelineno-5-228 href=#__codelineno-5-228></a><span class=s2>&quot;&quot;&quot;</span><span class=p>)</span>
</span><span id=__span-5-229><a id=__codelineno-5-229 name=__codelineno-5-229 href=#__codelineno-5-229></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Demo Podman container created: </span><span class=si>%s</span><span class=s2>...&quot;</span><span class=p>,</span> <span class=n>container_id</span><span class=p>[:</span><span class=mi>12</span><span class=p>])</span>
</span><span id=__span-5-230><a id=__codelineno-5-230 name=__codelineno-5-230 href=#__codelineno-5-230></a>
</span><span id=__span-5-231><a id=__codelineno-5-231 name=__codelineno-5-231 href=#__codelineno-5-231></a>        <span class=c1># Connect to the existing container</span>
</span><span id=__span-5-232><a id=__codelineno-5-232 name=__codelineno-5-232 href=#__codelineno-5-232></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🔗 Connecting to existing Podman container...&quot;</span><span class=p>)</span>
</span><span id=__span-5-233><a id=__codelineno-5-233 name=__codelineno-5-233 href=#__codelineno-5-233></a>        <span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-5-234><a id=__codelineno-5-234 name=__codelineno-5-234 href=#__codelineno-5-234></a>            <span class=n>backend</span><span class=o>=</span><span class=n>SandboxBackend</span><span class=o>.</span><span class=n>PODMAN</span><span class=p>,</span> <span class=n>client</span><span class=o>=</span><span class=n>client</span><span class=p>,</span> <span class=n>container_id</span><span class=o>=</span><span class=n>container_id</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-5-235><a id=__codelineno-5-235 name=__codelineno-5-235 href=#__codelineno-5-235></a>        <span class=p>)</span> <span class=k>as</span> <span class=n>sandbox</span><span class=p>:</span>
</span><span id=__span-5-236><a id=__codelineno-5-236 name=__codelineno-5-236 href=#__codelineno-5-236></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Connected to existing Podman container successfully!&quot;</span><span class=p>)</span>
</span><span id=__span-5-237><a id=__codelineno-5-237 name=__codelineno-5-237 href=#__codelineno-5-237></a>
</span><span id=__span-5-238><a id=__codelineno-5-238 name=__codelineno-5-238 href=#__codelineno-5-238></a>            <span class=c1># Run code in the existing container</span>
</span><span id=__span-5-239><a id=__codelineno-5-239 name=__codelineno-5-239 href=#__codelineno-5-239></a>            <span class=n>result</span> <span class=o>=</span> <span class=n>sandbox</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;&quot;&quot;</span>
</span><span id=__span-5-240><a id=__codelineno-5-240 name=__codelineno-5-240 href=#__codelineno-5-240></a><span class=s2>import platform</span>
</span><span id=__span-5-241><a id=__codelineno-5-241 name=__codelineno-5-241 href=#__codelineno-5-241></a><span class=s2>print(f&quot;Platform: {platform.platform()}&quot;)</span>
</span><span id=__span-5-242><a id=__codelineno-5-242 name=__codelineno-5-242 href=#__codelineno-5-242></a><span class=s2>print(&quot;Running in existing Podman container!&quot;)</span>
</span><span id=__span-5-243><a id=__codelineno-5-243 name=__codelineno-5-243 href=#__codelineno-5-243></a>
</span><span id=__span-5-244><a id=__codelineno-5-244 name=__codelineno-5-244 href=#__codelineno-5-244></a><span class=s2># Read the existing file</span>
</span><span id=__span-5-245><a id=__codelineno-5-245 name=__codelineno-5-245 href=#__codelineno-5-245></a><span class=s2>try:</span>
</span><span id=__span-5-246><a id=__codelineno-5-246 name=__codelineno-5-246 href=#__codelineno-5-246></a><span class=s2>    with open(&#39;/sandbox/podman_info.txt&#39;, &#39;r&#39;) as f:</span>
</span><span id=__span-5-247><a id=__codelineno-5-247 name=__codelineno-5-247 href=#__codelineno-5-247></a><span class=s2>        info = f.read().strip()</span>
</span><span id=__span-5-248><a id=__codelineno-5-248 name=__codelineno-5-248 href=#__codelineno-5-248></a><span class=s2>        print(f&quot;Container info: </span><span class=si>{info}</span><span class=s2>&quot;)</span>
</span><span id=__span-5-249><a id=__codelineno-5-249 name=__codelineno-5-249 href=#__codelineno-5-249></a><span class=s2>except FileNotFoundError:</span>
</span><span id=__span-5-250><a id=__codelineno-5-250 name=__codelineno-5-250 href=#__codelineno-5-250></a><span class=s2>    print(&quot;Container info file not found&quot;)</span>
</span><span id=__span-5-251><a id=__codelineno-5-251 name=__codelineno-5-251 href=#__codelineno-5-251></a><span class=s2>&quot;&quot;&quot;</span><span class=p>)</span>
</span><span id=__span-5-252><a id=__codelineno-5-252 name=__codelineno-5-252 href=#__codelineno-5-252></a>
</span><span id=__span-5-253><a id=__codelineno-5-253 name=__codelineno-5-253 href=#__codelineno-5-253></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;📊 Podman execution output:&quot;</span><span class=p>)</span>
</span><span id=__span-5-254><a id=__codelineno-5-254 name=__codelineno-5-254 href=#__codelineno-5-254></a>            <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=n>result</span><span class=o>.</span><span class=n>stdout</span><span class=p>)</span>
</span><span id=__span-5-255><a id=__codelineno-5-255 name=__codelineno-5-255 href=#__codelineno-5-255></a>
</span><span id=__span-5-256><a id=__codelineno-5-256 name=__codelineno-5-256 href=#__codelineno-5-256></a>    <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
</span><span id=__span-5-257><a id=__codelineno-5-257 name=__codelineno-5-257 href=#__codelineno-5-257></a>        <span class=n>logger</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;⚠️  Podman not available, skipping Podman demo&quot;</span><span class=p>)</span>
</span><span id=__span-5-258><a id=__codelineno-5-258 name=__codelineno-5-258 href=#__codelineno-5-258></a>    <span class=k>except</span> <span class=n>ContainerError</span><span class=p>:</span>
</span><span id=__span-5-259><a id=__codelineno-5-259 name=__codelineno-5-259 href=#__codelineno-5-259></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Failed to connect to Podman container&quot;</span><span class=p>)</span>
</span><span id=__span-5-260><a id=__codelineno-5-260 name=__codelineno-5-260 href=#__codelineno-5-260></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-5-261><a id=__codelineno-5-261 name=__codelineno-5-261 href=#__codelineno-5-261></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Error in Podman demo&quot;</span><span class=p>)</span>
</span><span id=__span-5-262><a id=__codelineno-5-262 name=__codelineno-5-262 href=#__codelineno-5-262></a>
</span><span id=__span-5-263><a id=__codelineno-5-263 name=__codelineno-5-263 href=#__codelineno-5-263></a>
</span><span id=__span-5-264><a id=__codelineno-5-264 name=__codelineno-5-264 href=#__codelineno-5-264></a><span class=k>def</span><span class=w> </span><span class=nf>demo_error_handling</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-5-265><a id=__codelineno-5-265 name=__codelineno-5-265 href=#__codelineno-5-265></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Demo error handling when connecting to non-existent containers.&quot;&quot;&quot;</span>
</span><span id=__span-5-266><a id=__codelineno-5-266 name=__codelineno-5-266 href=#__codelineno-5-266></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-267><a id=__codelineno-5-267 name=__codelineno-5-267 href=#__codelineno-5-267></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🛡️  Demo: Error Handling&quot;</span><span class=p>)</span>
</span><span id=__span-5-268><a id=__codelineno-5-268 name=__codelineno-5-268 href=#__codelineno-5-268></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>60</span><span class=p>)</span>
</span><span id=__span-5-269><a id=__codelineno-5-269 name=__codelineno-5-269 href=#__codelineno-5-269></a>
</span><span id=__span-5-270><a id=__codelineno-5-270 name=__codelineno-5-270 href=#__codelineno-5-270></a>    <span class=c1># Try connecting to non-existent container</span>
</span><span id=__span-5-271><a id=__codelineno-5-271 name=__codelineno-5-271 href=#__codelineno-5-271></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🧪 Testing connection to non-existent container...&quot;</span><span class=p>)</span>
</span><span id=__span-5-272><a id=__codelineno-5-272 name=__codelineno-5-272 href=#__codelineno-5-272></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-273><a id=__codelineno-5-273 name=__codelineno-5-273 href=#__codelineno-5-273></a>        <span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span><span class=n>container_id</span><span class=o>=</span><span class=s2>&quot;non-existent-container-id&quot;</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span> <span class=k>as</span> <span class=n>sandbox</span><span class=p>:</span>
</span><span id=__span-5-274><a id=__codelineno-5-274 name=__codelineno-5-274 href=#__codelineno-5-274></a>            <span class=n>sandbox</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;print(&#39;This should not work&#39;)&quot;</span><span class=p>)</span>
</span><span id=__span-5-275><a id=__codelineno-5-275 name=__codelineno-5-275 href=#__codelineno-5-275></a>
</span><span id=__span-5-276><a id=__codelineno-5-276 name=__codelineno-5-276 href=#__codelineno-5-276></a>    <span class=k>except</span> <span class=n>ContainerError</span><span class=p>:</span>
</span><span id=__span-5-277><a id=__codelineno-5-277 name=__codelineno-5-277 href=#__codelineno-5-277></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Correctly caught ContainerError&quot;</span><span class=p>)</span>
</span><span id=__span-5-278><a id=__codelineno-5-278 name=__codelineno-5-278 href=#__codelineno-5-278></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-5-279><a id=__codelineno-5-279 name=__codelineno-5-279 href=#__codelineno-5-279></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;❌ Unexpected error type&quot;</span><span class=p>)</span>
</span><span id=__span-5-280><a id=__codelineno-5-280 name=__codelineno-5-280 href=#__codelineno-5-280></a>
</span><span id=__span-5-281><a id=__codelineno-5-281 name=__codelineno-5-281 href=#__codelineno-5-281></a>    <span class=c1># Try with invalid pod name</span>
</span><span id=__span-5-282><a id=__codelineno-5-282 name=__codelineno-5-282 href=#__codelineno-5-282></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🧪 Testing connection to non-existent pod...&quot;</span><span class=p>)</span>
</span><span id=__span-5-283><a id=__codelineno-5-283 name=__codelineno-5-283 href=#__codelineno-5-283></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-5-284><a id=__codelineno-5-284 name=__codelineno-5-284 href=#__codelineno-5-284></a>        <span class=k>with</span> <span class=n>SandboxSession</span><span class=p>(</span>
</span><span id=__span-5-285><a id=__codelineno-5-285 name=__codelineno-5-285 href=#__codelineno-5-285></a>            <span class=n>backend</span><span class=o>=</span><span class=n>SandboxBackend</span><span class=o>.</span><span class=n>KUBERNETES</span><span class=p>,</span> <span class=n>container_id</span><span class=o>=</span><span class=s2>&quot;non-existent-pod&quot;</span><span class=p>,</span> <span class=n>lang</span><span class=o>=</span><span class=s2>&quot;python&quot;</span><span class=p>,</span> <span class=n>verbose</span><span class=o>=</span><span class=kc>True</span>
</span><span id=__span-5-286><a id=__codelineno-5-286 name=__codelineno-5-286 href=#__codelineno-5-286></a>        <span class=p>)</span> <span class=k>as</span> <span class=n>sandbox</span><span class=p>:</span>
</span><span id=__span-5-287><a id=__codelineno-5-287 name=__codelineno-5-287 href=#__codelineno-5-287></a>            <span class=n>sandbox</span><span class=o>.</span><span class=n>run</span><span class=p>(</span><span class=s2>&quot;print(&#39;This should not work&#39;)&quot;</span><span class=p>)</span>
</span><span id=__span-5-288><a id=__codelineno-5-288 name=__codelineno-5-288 href=#__codelineno-5-288></a>
</span><span id=__span-5-289><a id=__codelineno-5-289 name=__codelineno-5-289 href=#__codelineno-5-289></a>    <span class=k>except</span> <span class=n>ContainerError</span><span class=p>:</span>
</span><span id=__span-5-290><a id=__codelineno-5-290 name=__codelineno-5-290 href=#__codelineno-5-290></a>        <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;✅ Correctly caught ContainerError for K8s&quot;</span><span class=p>)</span>
</span><span id=__span-5-291><a id=__codelineno-5-291 name=__codelineno-5-291 href=#__codelineno-5-291></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-5-292><a id=__codelineno-5-292 name=__codelineno-5-292 href=#__codelineno-5-292></a>        <span class=n>logger</span><span class=o>.</span><span class=n>exception</span><span class=p>(</span><span class=s2>&quot;⚠️  K8s error (cluster may not be available)&quot;</span><span class=p>)</span>
</span><span id=__span-5-293><a id=__codelineno-5-293 name=__codelineno-5-293 href=#__codelineno-5-293></a>
</span><span id=__span-5-294><a id=__codelineno-5-294 name=__codelineno-5-294 href=#__codelineno-5-294></a>
</span><span id=__span-5-295><a id=__codelineno-5-295 name=__codelineno-5-295 href=#__codelineno-5-295></a><span class=k>def</span><span class=w> </span><span class=nf>main</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-5-296><a id=__codelineno-5-296 name=__codelineno-5-296 href=#__codelineno-5-296></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Run all demos.&quot;&quot;&quot;</span>
</span><span id=__span-5-297><a id=__codelineno-5-297 name=__codelineno-5-297 href=#__codelineno-5-297></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🎯 LLM Sandbox - Existing Container Support Demo&quot;</span><span class=p>)</span>
</span><span id=__span-5-298><a id=__codelineno-5-298 name=__codelineno-5-298 href=#__codelineno-5-298></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>80</span><span class=p>)</span>
</span><span id=__span-5-299><a id=__codelineno-5-299 name=__codelineno-5-299 href=#__codelineno-5-299></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;This demo shows how to connect to existing containers/pods&quot;</span><span class=p>)</span>
</span><span id=__span-5-300><a id=__codelineno-5-300 name=__codelineno-5-300 href=#__codelineno-5-300></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;instead of creating new ones from scratch.&quot;</span><span class=p>)</span>
</span><span id=__span-5-301><a id=__codelineno-5-301 name=__codelineno-5-301 href=#__codelineno-5-301></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>80</span><span class=p>)</span>
</span><span id=__span-5-302><a id=__codelineno-5-302 name=__codelineno-5-302 href=#__codelineno-5-302></a>
</span><span id=__span-5-303><a id=__codelineno-5-303 name=__codelineno-5-303 href=#__codelineno-5-303></a>    <span class=c1># Give container a moment to settle</span>
</span><span id=__span-5-304><a id=__codelineno-5-304 name=__codelineno-5-304 href=#__codelineno-5-304></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>
</span><span id=__span-5-305><a id=__codelineno-5-305 name=__codelineno-5-305 href=#__codelineno-5-305></a>
</span><span id=__span-5-306><a id=__codelineno-5-306 name=__codelineno-5-306 href=#__codelineno-5-306></a>    <span class=c1># Demo 1: Connect to existing Docker container</span>
</span><span id=__span-5-307><a id=__codelineno-5-307 name=__codelineno-5-307 href=#__codelineno-5-307></a>    <span class=n>demo_connect_to_existing_docker_container</span><span class=p>()</span>
</span><span id=__span-5-308><a id=__codelineno-5-308 name=__codelineno-5-308 href=#__codelineno-5-308></a>
</span><span id=__span-5-309><a id=__codelineno-5-309 name=__codelineno-5-309 href=#__codelineno-5-309></a>    <span class=c1># Demo 2: Connect to existing Kubernetes pod</span>
</span><span id=__span-5-310><a id=__codelineno-5-310 name=__codelineno-5-310 href=#__codelineno-5-310></a>    <span class=n>demo_connect_to_existing_kubernetes_pod</span><span class=p>()</span>
</span><span id=__span-5-311><a id=__codelineno-5-311 name=__codelineno-5-311 href=#__codelineno-5-311></a>
</span><span id=__span-5-312><a id=__codelineno-5-312 name=__codelineno-5-312 href=#__codelineno-5-312></a>    <span class=c1># # Demo 3: Connect to existing Podman container</span>
</span><span id=__span-5-313><a id=__codelineno-5-313 name=__codelineno-5-313 href=#__codelineno-5-313></a>    <span class=n>demo_connect_to_existing_podman_container</span><span class=p>()</span>
</span><span id=__span-5-314><a id=__codelineno-5-314 name=__codelineno-5-314 href=#__codelineno-5-314></a>
</span><span id=__span-5-315><a id=__codelineno-5-315 name=__codelineno-5-315 href=#__codelineno-5-315></a>    <span class=c1># Demo 4: Error handling</span>
</span><span id=__span-5-316><a id=__codelineno-5-316 name=__codelineno-5-316 href=#__codelineno-5-316></a>    <span class=n>demo_error_handling</span><span class=p>()</span>
</span><span id=__span-5-317><a id=__codelineno-5-317 name=__codelineno-5-317 href=#__codelineno-5-317></a>
</span><span id=__span-5-318><a id=__codelineno-5-318 name=__codelineno-5-318 href=#__codelineno-5-318></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;</span><span class=se>\n</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>80</span><span class=p>)</span>
</span><span id=__span-5-319><a id=__codelineno-5-319 name=__codelineno-5-319 href=#__codelineno-5-319></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;🎉 Demo completed!&quot;</span><span class=p>)</span>
</span><span id=__span-5-320><a id=__codelineno-5-320 name=__codelineno-5-320 href=#__codelineno-5-320></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Key benefits of existing container support:&quot;</span><span class=p>)</span>
</span><span id=__span-5-321><a id=__codelineno-5-321 name=__codelineno-5-321 href=#__codelineno-5-321></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;• 🚀 Faster startup (no environment setup)&quot;</span><span class=p>)</span>
</span><span id=__span-5-322><a id=__codelineno-5-322 name=__codelineno-5-322 href=#__codelineno-5-322></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;• 🔧 Work with pre-configured environments&quot;</span><span class=p>)</span>
</span><span id=__span-5-323><a id=__codelineno-5-323 name=__codelineno-5-323 href=#__codelineno-5-323></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;• 🔄 Reuse containers across multiple sandboxs&quot;</span><span class=p>)</span>
</span><span id=__span-5-324><a id=__codelineno-5-324 name=__codelineno-5-324 href=#__codelineno-5-324></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;• 🐛 Connect to running containers for debugging&quot;</span><span class=p>)</span>
</span><span id=__span-5-325><a id=__codelineno-5-325 name=__codelineno-5-325 href=#__codelineno-5-325></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;• 📦 Integrate with external container management&quot;</span><span class=p>)</span>
</span><span id=__span-5-326><a id=__codelineno-5-326 name=__codelineno-5-326 href=#__codelineno-5-326></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;=&quot;</span> <span class=o>*</span> <span class=mi>80</span><span class=p>)</span>
</span><span id=__span-5-327><a id=__codelineno-5-327 name=__codelineno-5-327 href=#__codelineno-5-327></a>
</span><span id=__span-5-328><a id=__codelineno-5-328 name=__codelineno-5-328 href=#__codelineno-5-328></a>
</span><span id=__span-5-329><a id=__codelineno-5-329 name=__codelineno-5-329 href=#__codelineno-5-329></a><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s2>&quot;__main__&quot;</span><span class=p>:</span>
</span><span id=__span-5-330><a id=__codelineno-5-330 name=__codelineno-5-330 href=#__codelineno-5-330></a>    <span class=n>main</span><span class=p>()</span>
</span></code></pre></div> <h2 id=backend-specific-notes>Backend-Specific Notes<a class=headerlink href=#backend-specific-notes title="Permanent link">&para;</a></h2> <h3 id=docker>Docker<a class=headerlink href=#docker title="Permanent link">&para;</a></h3> <ul> <li>Uses container ID or name</li> <li>Supports both running and stopped containers (will start if stopped)</li> <li>Full Docker API compatibility</li> </ul> <h3 id=kubernetes>Kubernetes<a class=headerlink href=#kubernetes title="Permanent link">&para;</a></h3> <ul> <li>Uses pod name as <code>container_id</code></li> <li>Must specify correct namespace via <code>kube_namespace</code> parameter</li> <li>Pod must be in "Running" state</li> <li>Will wait briefly for "Pending" pods to start</li> </ul> <h3 id=podman>Podman<a class=headerlink href=#podman title="Permanent link">&para;</a></h3> <ul> <li>Uses container ID or name</li> <li>Compatible with Docker API</li> <li>Supports both running and stopped containers</li> </ul> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <ol> <li><strong>Ensure Environment Readiness</strong>: Make sure containers have required interpreters/compilers</li> <li><strong>Handle Connection Errors</strong>: Always wrap in try/catch for <code>ContainerError</code></li> <li><strong>Document Dependencies</strong>: Clearly document what your existing containers need</li> <li><strong>Test Connectivity</strong>: Verify container is accessible before production use</li> <li><strong>Monitor Resources</strong>: Existing containers may have different resource constraints</li> </ol> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="June 15, 2025 06:22:28 UTC"><span class=timeago datetime=2025-06-15T06:22:28+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="June 15, 2025 06:22:28 UTC">2025-06-15</span> </span> <span class=md-source-file__fact> <span class=md-icon title=Created> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="June 14, 2025 02:42:44 UTC"><span class=timeago datetime=2025-06-14T02:42:44+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="June 14, 2025 02:42:44 UTC">2025-06-14</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../integrations/ class="md-footer__link md-footer__link--prev" aria-label="Previous: LLM Integrations"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> LLM Integrations </div> </div> </a> <a href=../examples/ class="md-footer__link md-footer__link--next" aria-label="Next: Examples"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Examples </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 Duy Huynh - Maintained by <a href=https://blog.duy.dev>vndee</a> </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/vndee/llm-sandbox target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://pypi.org/project/llm-sandbox/ target=_blank rel=noopener title=pypi.org class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 404c11.1 0 20.1 9.1 20.1 20.3 0 11.3-9 20.4-20.1 20.4-11 0-20.1-9.2-20.1-20.4.1-11.3 9.1-20.3 20.1-20.3M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.7-142.6c-11.1 0-20.1-9.1-20.1-20.3.1-11.3 9-20.4 20.1-20.4 11 0 20.1 9.2 20.1 20.4s-9 20.3-20.1 20.3"/></svg> </a> <a href=https://hub.docker.com/u/vndee target=_blank rel=noopener title=hub.docker.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg> </a> <a href=https://linkedin.com/in/vndee target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://blog.duy.dev target=_blank rel=noopener title=blog.duy.dev class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M352 256c0 22.2-1.2 43.6-3.3 64H163.4c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64h185.3c2.2 20.4 3.3 41.8 3.3 64m28.8-64h123.1c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64H380.8c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64m112.6-32H376.7c-10-63.9-29.8-117.4-55.3-151.6 78.3 20.7 142 77.5 171.9 151.6zm-149.1 0H167.7c6.1-36.4 15.5-68.6 27-94.7 10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5 11.6 26 20.9 58.2 27 94.7m-209 0H18.6c30-74.1 93.6-130.9 172-151.6-25.5 34.2-45.3 87.7-55.3 151.6M8.1 192h123.1c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64H8.1C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64m186.6 254.6c-11.6-26-20.9-58.2-27-94.6h176.6c-6.1 36.4-15.5 68.6-27 94.6-10.5 23.6-22.2 40.7-33.5 51.5-11.2 10.7-20.5 13.9-27.8 13.9s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6-78.4-20.7-142-77.5-172-151.6zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6 25.5-34.2 45.2-87.7 55.3-151.6h116.7z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-progress data-md-component=progress role=progressbar></div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better. </p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=analytics checked> <span class=task-list-indicator></span> Google Analytics </label> </li> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"base": "..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.tooltips", "header.autohide", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.prune", "navigation.sections", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "latest", "provider": "mike"}}</script> <script src=../assets/javascripts/bundle.13a4f30d.min.js></script> <script src=../js/timeago.min.js></script> <script src=../js/timeago_mkdocs_material.js></script> <script src=../javascripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>